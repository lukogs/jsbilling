<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Food Stall Billing</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <style>
            body { background-color: #fafafa; }
            .card { margin-bottom: 1rem; }
            .btn-sm { margin-right: 5px; }
            .total-box { font-size: 1.2rem; font-weight: bold; }
        </style>
    </head>
    <body class="p-3">
        <div class="container">
            <h2 class="text-center mb-4">üçΩÔ∏è Food Stall Billing</h2>
            <div class="row">
                <!-- Breakfast Menu -->
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header bg-warning"><strong>Breakfast Menu</strong></div>
                        <div class="card-body" id="breakfast-list"></div>
                    </div>
                </div>
                <!-- Lunch Menu -->
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header bg-success text-white"><strong>Lunch Menu</strong></div>
                        <div class="card-body" id="lunch-list"></div>
                    </div>
                </div>
            </div>
            <!-- Billing Section -->
            <div class="card">
                <div class="card-header bg-primary text-white"><strong>Bill</strong></div>
                <div class="card-body">
                    <table class="table table-sm" id="bill-table">
                        <thead>
                            <tr>
                                <th>Item</th>
                                <th>Qty</th>
                                <th>Price</th>
                                <th>Total</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                    <div class="d-flex align-items-center justify-content-between">
                        <div>
                            <input type="checkbox" id="parcel" class="form-check-input me-2">
                            <label for="parcel" class="form-check-label">Add Parcel Charge (‚Çπ5)</label>
                        </div>
                        <div class="total-box">Total: ‚Çπ<span id="total">0</span></div>
                    </div>
                    <button class="btn btn-danger mt-3 me-2" onclick="clearBill()">Clear Bill</button>
                    <button class="btn btn-success mt-3" onclick="printBill()">Print Bill</button>
                </div>
            </div>
            <!-- Add/Edit Item Section -->
            <div class="card mt-4">
                <div class="card-header bg-dark text-white"><strong>Manage Menu</strong></div>
                <div class="card-body">
                    <div class="row g-2">
                        <div class="col-md-3">
                            <input type="text" id="itemName" class="form-control" placeholder="Item Name">
                        </div>
                        <div class="col-md-3">
                            <input type="number" id="itemPrice" class="form-control" placeholder="Price ‚Çπ">
                        </div>
                        <div class="col-md-3">
                            <select id="itemCategory" class="form-select">
                                <option value="breakfast">Breakfast</option>
                                <option value="lunch">Lunch</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-primary w-100" onclick="addMenuItem()">Add / Update Item</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            let menus = {
              breakfast: {
                "Tea": 10, "Black Tea": 10, "Coffee": 10, "Black Coffee": 10,
                "Puttu": 10, "Appam": 10, "Parotta": 15, "Poola": 30,
                "Vegetable Curry": 35, "Fish Curry": 35, "Egg Roast": 35, "Parts": 40
              },
              lunch: {
                "Meals": 50, "Fish 1": 40, "Fish 2": 50, "Fish 3": 60, "Fish 4": 50
              }
            };
            
            let bill = {};
            
            function renderMenus() {
              document.getElementById("breakfast-list").innerHTML = renderMenu("breakfast");
              document.getElementById("lunch-list").innerHTML = renderMenu("lunch");
            }
            
            function renderMenu(type) {
              let html = "";
              for (let item in menus[type]) {
                html += `
                  <div class="d-flex justify-content-between align-items-center border-bottom py-1">
                    <span>${item} - ‚Çπ${menus[type][item]}</span>
                    <button class="btn btn-sm btn-outline-primary" onclick="addToBill('${item}', ${menus[type][item]})">Add</button>
                  </div>`;
              }
              return html;
            }
            
            function addToBill(item, price) {
              if (!bill[item]) bill[item] = { qty: 1, price };
              else bill[item].qty++;
              renderBill();
            }
            
            function renderBill() {
              let tbody = document.querySelector("#bill-table tbody");
              tbody.innerHTML = "";
              let total = 0;
              for (let item in bill) {
                let itemTotal = bill[item].qty * bill[item].price;
                total += itemTotal;
                tbody.innerHTML += `
                  <tr>
                    <td>${item}</td>
                    <td><input type="number" min="1" value="${bill[item].qty}" class="form-control form-control-sm" onchange="updateQty('${item}', this.value)"></td>
                    <td>‚Çπ${bill[item].price}</td>
                    <td>‚Çπ${itemTotal}</td>
                    <td><button class="btn btn-sm btn-danger" onclick="removeItem('${item}')">X</button></td>
                  </tr>`;
              }
              if (document.getElementById("parcel").checked) total += 5;
              document.getElementById("total").innerText = total;
            }
            
            function updateQty(item, qty) {
              bill[item].qty = parseInt(qty);
              renderBill();
            }
            
            function removeItem(item) {
              delete bill[item];
              renderBill();
            }
            
            function clearBill() {
              bill = {};
              document.getElementById("parcel").checked = false;
              renderBill();
            }
            
            function printBill() {
              window.print();
            }
            
            function addMenuItem() {
              let name = document.getElementById("itemName").value.trim();
              let price = parseFloat(document.getElementById("itemPrice").value);
              let cat = document.getElementById("itemCategory").value;
              if (name && price > 0) {
                menus[cat][name] = price;
                renderMenus();
                document.getElementById("itemName").value = "";
                document.getElementById("itemPrice").value = "";
              } else {
                alert("Please enter valid item name and price");
              }
            }
            
            document.getElementById("parcel").addEventListener("change", renderBill);
            renderMenus();
        </script>
    </body>
</html>